(()=>{"use strict";const e=/[\?&]OVERLAY_WS=([^&]+)/,s=new class{#e;#s(e){try{const s=JSON.parse(e.data);console.log(s)}catch(e){console.error(e)}}connect(s){this.#e=new WebSocket(e.exec(s)?.[1]??"ws://127.0.0.1:10501/ws"),this.#e.addEventListener("open",(()=>{console.log("ACTWS connected"),this.#e.send(JSON.stringify({call:"subscribe",events:["ChangeZone"]}))})),this.#e.addEventListener("message",(e=>this.#s(e))),this.#e.addEventListener("close",(e=>{console.warn("ACTWS closed:",e),setTimeout(this.connect.bind(this,s),5e3)})),this.#e.addEventListener("error",(e=>console.error(e)))}};self.addEventListener("connect",(e=>{const t=e.ports[0];t.addEventListener("message",(({data:e})=>{const{action:t,data:n}=e;console.log(t,n),s.connect(n)})),console.log("ACT port started"),t.start()}))})();